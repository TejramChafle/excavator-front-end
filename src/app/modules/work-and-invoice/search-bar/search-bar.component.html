<div fxFlex fxLayout="row" fxLayoutAlign="start center" class="p-24">

    <div class="close-button-wrapper" fxFlex="0 1 auto" fxFlex.gt-sm="100px">
        <button class="p-8" mat-button fxLayout="row" fxLayoutAlign="start center" (click)="onClickBack()">
            <mat-icon class="mr-8">arrow_back</mat-icon>
            <span class="text-uppercase">Back</span>
        </button>
    </div>

    <div class="form-container">
        <form name="form" [formGroup]="form">
            <div class="form-row">
                <mat-form-field appearance="outline" class="form-field">
                    <mat-label>Customer</mat-label>
                    <mat-select matNativeControl formControlName="customer">
                        <mat-option [value]="customer._id" *ngFor="let customer of customers">
                            {{customer.name}}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text">business</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>Service</mat-label>
                    <mat-select matNativeControl formControlName="service">
                        <mat-option [value]="service._id" *ngFor="let service of services">
                            {{service.name}} <span *ngIf="service.description">({{service.description}})</span>
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text">room_service</mat-icon>
                </mat-form-field>
                
                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>Site</mat-label>
                    <input matInput #site
                        formControlName="site">
                    <mat-icon matSuffix class="secondary-text">place</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>Work Date</mat-label>
                    <input matInput placeholder="Work Date"
                        name="date"
                        formControlName="date"
                       [matDatepicker]="workDatePicker">
                       <mat-datepicker-toggle matSuffix [for]="workDatePicker"></mat-datepicker-toggle>
                       <mat-datepicker #workDatePicker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>To Work Date</mat-label>
                    <input matInput placeholder="Work Date"
                        name="toDate"
                        formControlName="toDate"
                       [matDatepicker]="toDatePicker">
                       <mat-datepicker-toggle matSuffix [for]="toDatePicker"></mat-datepicker-toggle>
                       <mat-datepicker #toDatePicker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>Vehicle</mat-label>
                    <mat-select matNativeControl formControlName="vehicle" multiple>
                        <mat-option [value]="vehicle._id" *ngFor="let vehicle of vehicles">
                            {{vehicle.name}} ({{vehicle.number}})
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text">local_shipping</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'WORK'">
                    <mat-label>Workers</mat-label>
                    <mat-select matNativeControl formControlName="worker" multiple>
                        <mat-option [value]="worker._id" *ngFor="let worker of contacts">
                            {{worker.name}}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text">person</mat-icon>
                </mat-form-field>
                
                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'INVOICE'">
                    <mat-label>Invoice Generated Date</mat-label>
                    <input matInput placeholder="Invoice Generated Date"
                        name="invoiceDate"
                        formControlName="invoiceDate"
                       [matDatepicker]="invoiceDatePicker">
                       <mat-datepicker-toggle matSuffix [for]="invoiceDatePicker"></mat-datepicker-toggle>
                       <mat-datepicker #invoiceDatePicker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'INVOICE'">
                    <mat-label>Invoice #</mat-label>
                    <input matInput #invoiceNumber
                        formControlName="invoiceNumber" maxlength="6">
                    <mat-icon matSuffix class="secondary-text">receipt</mat-icon>
                    <mat-hint align="end">{{invoiceNumber.value.length}} / 6</mat-hint>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'INVOICE'">
                    <mat-label>Invoice Status</mat-label>
                    <mat-select matNativeControl formControlName="status">
                        <mat-option [value]="status.code" *ngFor="let status of statuses">
                            {{status.name}}
                        </mat-option>
                    </mat-select>
                    <mat-icon matSuffix class="secondary-text">access_time</mat-icon>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field" *ngIf="searchingFor == 'INVOICE'">
                    <mat-label>Total Amount</mat-label>
                    <input matInput #total
                        formControlName="total" maxlength="8">
                    <mat-icon matSuffix class="secondary-text">attach_money</mat-icon>
                </mat-form-field>
            </div>
            
            <div class="action-buttons">
                <button mat-raised-button class="fuse-white mt-24 mt-md-0" (click)="search()" aria-label="search">
                    <mat-icon class="mr-8">search</mat-icon>
                    <span class="text-uppercase">Search</span>
                </button>
        
                <button mat-stroked-button color="warn" class="fuse-white mt-24 mt-md-0" (click)="clearForm()" aria-label="clear form">
                    <mat-icon class="mr-8">clear</mat-icon>
                    <span class="text-uppercase">Clear</span>
                </button>
            </div>
        </form> 
    </div>
</div>
